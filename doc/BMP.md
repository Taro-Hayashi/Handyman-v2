# BMP Boost を使った無線化（[English](BMP_EN.md)）

## ご注意
- 必ず無線化しない状態での動作を確認してから無線化してください。
- スライドスイッチの機能が電源のオンオフになり、LEDは発光しません。

## 無線化に必要なもの

### 追加で購入するもの
![](./img/IMG_8786.jpg)

- [BMP Boost](https://shop.yushakobo.jp/products/10737) ...1つ
- [コンスルー 12ピン（高さ3.5mm）](https://shop.yushakobo.jp/products/31?variant=50965220491495) ...2本
- [電池ボックス 単4×1本用 リード線](https://akizukidenshi.com/catalog/g/g109292/)(この電池ボックス以外での取り付けは確認していません) ...1つ
- [単4電池](https://amzn.to/3JElKkV) ...1本

### 用意するもの
- Handyman v2 本体
- 無線化の袋
- [データ転送に対応したType-C USBケーブル](https://amzn.to/3XS9qRu)
- [精密ドライバー](https://amzn.to/48pxS1B0)

### BMP BOOSTの設定
BMP BOOSTをPCにUSBケーブルで接続し、Google ChromeでBLE Micro Pro Web Configuratorにアクセスします。

- [BLE Micro Pro Web Configurator](https://sekigon-gonnoc.github.io/BLE-Micro-Pro-WebConfigurator/)

ブートローダーとアプリケーションをアップデートします。基本的には最新の、同じバージョンにしてください。

![](./img/1.png)
![](./img/2.png)
BMPのドライブにCONFIG.BINがあることを確認してください。
![](./img/3.png)

こちらのzipファイルをダウンロードします。
- [handymanv2_bmp.zip](https://github.com/Taro-Hayashi/Handyman-v2/releases/latest/download/handymanv2_bmp.zip)

zipファイルの中身の3つのファイルをドラッグ&ドロップします。一度ケーブルを繋ぎ直してドライブに入れたファイルが消えていることを確認します。
![](./img/4.png)



## 分解と組み立て
ノブのカバーを引き抜きます。アクリルの小さい蓋を無くさないように気をつけます。
![](./img/IMG_8730.jpg)

スイッチプレートを外します。まとめて剥がせますが安全を期するなら一つずつスイッチを外します。
![](./img/IMG_8760.jpg)

取り付ける時のために全てのスイッチをスイッチプレートから外します。
![](./img/IMG_8959.jpg)

ネジを外してボトムカバーを外します。
![](./img/IMG_8769.jpg)

残りの3つのネジを外してボトムスタンドを外します。
![](./img/IMG_8776.jpg)

ボトムスタンドからマイコンカバーを取り外します。印をつけた部分は折れやすいので垂直に抜くように気をつけます（折れても機能には問題がないことが多いです）。
![](./img/IMG_8780.jpg)

ボトムプレートを外します。印のパーツを無くさないように保管します。
![](./img/IMG_8808.jpg)

2箇所のジャンパーピンを外します。
![](./img/IMG_8816.jpg)

無線化の袋の8mmネジにスプリングワッシャー、ワッシャーの順に通しておきます。
![](./img/IMG_8820.jpg)

基板のバッテリー用ホール2箇所に表から8mmネジを通し、裏でワッシャー、ナットの順で取り付けます。ここではまだ締め付けません。
![](./img/IMG_8824.jpg)

ワッシャーとパッドの間に電池ボックスのリード戦の金属の部分を挟んでネジ止めし、導通させます。
リード戦を矢印の方向から出します。
![](./img/IMG_8828.jpg)

コンスルーを差し込みます。上下で1ピン分位置がずれています。
コンスルーは窓の高さと向きを同じにします。このガイドでは穴を高く、手前向きに統一しています。
![](./img/IMG_8891.jpg)

BTの位置合わせてBMP BOOSTをコンスルーに差し込みます。
![](./img/IMG_8897.jpg)

USBで接続して動作を確認します。
![](./img/IMG_8901.jpg)

問題がなければ電池を入れてスライドスイッチをオンにし、Bluetooth接続を試します。
![](./img/IMG_8905.jpg)
接続を確認できたら電池を抜きます。

大きな穴に電池ボックスを通してボトムプレートを基板に乗せます
![](./img/IMG_8833.jpg)

スライドスイッチカバー、サイドボタンカバーを付け直します。
![](./img/IMG_8915.jpg)

電池ボックスにアダプターを取り付けます。リード線の出口とアダプターの突起を合わせます。
![](./img/IMG_8921.jpg)
この時点ではしっかり固定されなくて大丈夫です。

ボトムスタンドにアダプターをつけた電池ボックスを差し込みます。向きに注意します。
![](./img/IMG_8927.jpg)

BMP BOOSTにBMPカバーを乗せます。
![](./img/IMG_8935.jpg)

ボトムスタンドをボトムプレートに乗せます。
![](./img/IMG_8943.jpg)
リード線が挟まらないように這わせます。マスキングテープなどで固定すると楽です。

ボトムスタンドをねじ止めします。厚い部分は10mmネジ、薄い部分は8mmネジを使い、ナットで締めます。
![](./img/IMG_8949.jpg)

カバーを取り付けて10mmネジをナットで固定します。
![](./img/IMG_8952.jpg)

スイッチプレートを乗せます。
![](./img/IMG_8962.jpg)

キースイッチを取り付けてノブも取り付け直します。
![](./img/IMG_8966.jpg)


## キーのカスタマイズ
PCにUSBで接続し、Google ChromeでVialにアクセスします（Remapは使用しません）。
- [VIAL WEB](https://vial.rocks/)

設定を変えるキーをクリックし、下から変更内容をクリックすると設定が完了します。
![](./img/vialstart.jpg)

右に並んでいる円がホイールとダイヤルの回転の設定にあたります。
![](./img/vialencoder.jpg)

### ショートカットの設定
各種ショートカットの設定は、Quantamタブにある修飾キー（Ctrlなど）同時押し用のキーを登録して、その中に押すキーを登録する形になっています。
![](./img/vialquantum.png)

例えばCtrl+ZであればLCtrl()を登録して、その中にZを登録します。
![](./img/vialz.png)

略称はL/R→左右、C→Ctrl S→Shift A→Alt/Option G→Windows/Commandを表しています。
_Tと付いているものはMod-Tapで、短かく押すと中のキーが押され、押し続けると該当の修飾キーが押された状態になります。

### レイヤーの設定
左の数字をクリックすると違うレイヤーのキーを設定できます。レイヤーを切り替えると設定を丸ごと変更でき、実質的にキー数を増やすことができます。
![](./img/viallayer.jpg)

TG(数字）キーを押すとそれ以降は指定のレイヤーに切り替わります。
MO（数字）はキーを押している間だけ指定のレイヤーに切り替えます。
![](./img/vialmo.jpg)

### Bluetoohの設定キー
Bluetooth関係のキーはUserタブにあります。
![](./img/vialuser.png)

SELはUSBと無線を切り替えることができます。
ADVは接続先の切り替え、DELは接続先の消去です。

### 設定の保存と復元
Fileメニューから保存を行うことができます。読み込ませると復元ができます。
![](./img/vialfile.jpg)

[スタートページに戻る](../README.md)
